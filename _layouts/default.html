{% include doctype-head.html %}
<body data-spy="scroll" data-offset="80" data-target=".scrollspy" id="top">
    {% include svg-defs.svg %}
    <!--[if lt IE 10]>
        <p class="oldie">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade your browser today</a> to better experience this site.</p>
    <![endif]-->

    {% include header.html %}

        {{ content }}

    {% include footer.html %}

    {% if site.analytics %}
        {% include analytics.html %}
    {% endif %}

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script> -->
    <!-- <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script> -->
    <script src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script src="{{ "/js/all.min.js" | relative_url }}"></script>
    <script type="text/javascript">
        var form = document.getElementById("my-contact-form");
        var formMessage = document.getElementById("form-message");
        var verifyMessage = document.getElementById("verify");
        var success = document.createTextNode('Success');

        form.onsubmit = function(event) {
            event.preventDefault();
            var formData = new FormData(form);
            var xhr = new XMLHttpRequest();

            var response = grecaptcha.getResponse();
            if(response.length == 0)
            {
            //reCaptcha not verified
            // alert("please verify you are humann!");
            verifyMessage.classList.remove('d-none');
            // evt.preventDefault();
            return false;
            }
            verifyMessage.classList.addClass('d-none');

            xhr.open("POST", form.action, true);
            xhr.onload = function(e) {
                console.log(xhr);
                var response = JSON.parse(xhr.response);
                if (xhr.status === 200) {
                formMessage.appendChild(success);
                formMessage.classList.toggle('show');
                form.reset();
                grecaptcha.reset();
                xhr = [];
                } else {
                formMessage.innerHTML = "Error: " + response.error;
                }
            };
            xhr.send(formData);
        };

        var $alertMsg = $("#form-message");
        $(".alert").on("close.bs.alert", function () {
            $alertMsg.removeClass("show");
            return false;
        });
    </script>
</body>
</html>
